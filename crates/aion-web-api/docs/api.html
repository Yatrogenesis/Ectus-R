<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ectus-R API Documentation</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 40px; padding: 20px; background: #f8fafc; border-radius: 8px; }
        .endpoint { margin: 20px 0; padding: 20px; border: 1px solid #e2e8f0; border-radius: 8px; }
        .method { font-weight: bold; padding: 4px 8px; border-radius: 4px; color: white; margin-right: 10px; }
        .get { background: #10b981; }
        .post { background: #3b82f6; }
        .put { background: #f59e0b; }
        .delete { background: #ef4444; }
        .path { font-family: monospace; background: #f3f4f6; padding: 2px 6px; border-radius: 4px; }
        .description { margin: 10px 0; color: #6b7280; }
        .example { background: #1f2937; color: #f9fafb; padding: 15px; border-radius: 6px; margin: 10px 0; font-family: monospace; overflow-x: auto; }
        .section { margin: 40px 0; }
        h2 { color: #1f2937; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸš€ Ectus-R API Documentation</h1>
        <p>Comprehensive API reference for the autonomous software engineering platform</p>
        <p><strong>Base URL:</strong> <code>https://api.ectus.ai/api/v1</code></p>
    </div>

    <div class="section">
        <h2>Authentication</h2>
        <p>Most endpoints require authentication via JWT tokens. Include the token in the Authorization header:</p>
        <div class="example">Authorization: Bearer &lt;your-jwt-token&gt;</div>
    </div>

    <div class="section">
        <h2>System Status & Monitoring</h2>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/health</span>
            </div>
            <div class="description">Check API server health status</div>
            <div class="example">{
  "status": "healthy",
  "timestamp": "2025-01-27T10:30:00Z",
  "version": "1.0.0",
  "services": {
    "api": "operational",
    "ai_engine": "operational",
    "monitoring": "operational"
  }
}</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/status</span>
            </div>
            <div class="description">Get comprehensive system status with metrics</div>
            <div class="example">{
  "overall_status": "operational",
  "timestamp": "2025-01-27T10:30:00Z",
  "services": [...],
  "system_metrics": {...},
  "active_alerts": [...]
}</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/metrics</span>
            </div>
            <div class="description">Get time-series metrics data</div>
            <div class="description"><strong>Query Parameters:</strong></div>
            <ul>
                <li><code>timerange</code> - 5m, 1h, 24h, 7d (default: 1h)</li>
                <li><code>metrics</code> - Comma-separated list of metric names</li>
                <li><code>granularity</code> - Data point interval</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>AI Engine</h2>

        <div class="endpoint">
            <div>
                <span class="method post">POST</span>
                <span class="path">/ai/generate</span>
            </div>
            <div class="description">Generate code from natural language prompt</div>
            <div class="example">{
  "prompt": "Create a REST API for user management",
  "language": "rust",
  "framework": "axum",
  "features": ["authentication", "database"],
  "deployment_target": "production"
}</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method post">POST</span>
                <span class="path">/ai/analyze</span>
            </div>
            <div class="description">Analyze existing code for issues and improvements</div>
            <div class="example">{
  "code": "fn main() { println!(\"Hello, world!\"); }"
}</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method post">POST</span>
                <span class="path">/ai/fix</span>
            </div>
            <div class="description">Automatically fix code issues</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method post">POST</span>
                <span class="path">/ai/refactor</span>
            </div>
            <div class="description">Refactor code for better structure and maintainability</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method post">POST</span>
                <span class="path">/ai/qa</span>
            </div>
            <div class="description">Run autonomous quality assurance on codebase</div>
        </div>
    </div>

    <div class="section">
        <h2>Deployment Management</h2>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/deployments</span>
            </div>
            <div class="description">List all deployments with filtering</div>
            <div class="description"><strong>Query Parameters:</strong></div>
            <ul>
                <li><code>offset</code> - Pagination offset (default: 0)</li>
                <li><code>limit</code> - Number of results (default: 20, max: 100)</li>
                <li><code>environment</code> - Filter by environment</li>
                <li><code>status</code> - Filter by status</li>
            </ul>
        </div>

        <div class="endpoint">
            <div>
                <span class="method post">POST</span>
                <span class="path">/deployments</span>
            </div>
            <div class="description">Create a new deployment</div>
            <div class="example">{
  "project_id": "123e4567-e89b-12d3-a456-426614174000",
  "environment": "production",
  "config": {}
}</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/deployments/{id}</span>
            </div>
            <div class="description">Get specific deployment by ID</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method put">PUT</span>
                <span class="path">/deployments/{id}</span>
            </div>
            <div class="description">Update deployment status or configuration</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method delete">DELETE</span>
                <span class="path">/deployments/{id}</span>
            </div>
            <div class="description">Delete a deployment</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/deployments/{id}/logs</span>
            </div>
            <div class="description">Get deployment logs</div>
            <div class="description"><strong>Query Parameters:</strong></div>
            <ul>
                <li><code>lines</code> - Number of log lines (default: 100, max: 1000)</li>
                <li><code>follow</code> - Stream logs in real-time</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>Project Management</h2>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/projects</span>
            </div>
            <div class="description">List all projects with filtering</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method post">POST</span>
                <span class="path">/projects</span>
            </div>
            <div class="description">Create a new project</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/projects/{id}</span>
            </div>
            <div class="description">Get specific project by ID</div>
        </div>
    </div>

    <div class="section">
        <h2>Authentication</h2>

        <div class="endpoint">
            <div>
                <span class="method post">POST</span>
                <span class="path">/auth/login</span>
            </div>
            <div class="description">Authenticate user and get JWT tokens</div>
            <div class="example">{
  "email": "user@example.com",
  "password": "password123"
}</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method post">POST</span>
                <span class="path">/auth/refresh</span>
            </div>
            <div class="description">Refresh access token using refresh token</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method post">POST</span>
                <span class="path">/auth/logout</span>
            </div>
            <div class="description">Invalidate current session</div>
        </div>
    </div>

    <div class="section">
        <h2>Admin Endpoints</h2>
        <p><em>These endpoints require admin privileges</em></p>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/admin/stats</span>
            </div>
            <div class="description">Get comprehensive system statistics</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/admin/users</span>
            </div>
            <div class="description">List all users in the system</div>
        </div>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/admin/system</span>
            </div>
            <div class="description">Get detailed system information</div>
        </div>
    </div>

    <div class="section">
        <h2>WebSocket Endpoints</h2>

        <div class="endpoint">
            <div>
                <span class="method get">GET</span>
                <span class="path">/ws</span>
            </div>
            <div class="description">WebSocket connection for real-time updates</div>
            <div class="description">Connect to this endpoint to receive real-time system updates, deployment status changes, and monitoring alerts.</div>
        </div>
    </div>

    <div class="section">
        <h2>Error Responses</h2>
        <p>The API uses standard HTTP status codes and returns error details in JSON format:</p>
        <div class="example">{
  "error": "ValidationError",
  "message": "Invalid request parameters",
  "timestamp": "2025-01-27T10:30:00Z",
  "request_id": "123e4567-e89b-12d3-a456-426614174000"
}</div>

        <h3>Common Status Codes</h3>
        <ul>
            <li><strong>200</strong> - Success</li>
            <li><strong>201</strong> - Created</li>
            <li><strong>400</strong> - Bad Request</li>
            <li><strong>401</strong> - Unauthorized</li>
            <li><strong>403</strong> - Forbidden</li>
            <li><strong>404</strong> - Not Found</li>
            <li><strong>429</strong> - Rate Limited</li>
            <li><strong>500</strong> - Internal Server Error</li>
        </ul>
    </div>

    <div class="section">
        <h2>Rate Limiting</h2>
        <p>The API implements rate limiting to ensure fair usage:</p>
        <ul>
            <li><strong>Standard endpoints:</strong> 1000 requests per hour</li>
            <li><strong>AI endpoints:</strong> 100 requests per hour</li>
            <li><strong>Admin endpoints:</strong> 500 requests per hour</li>
        </ul>
        <p>Rate limit headers are included in all responses:</p>
        <div class="example">X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1643292000</div>
    </div>

    <footer style="margin-top: 60px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center; color: #6b7280;">
        <p>&copy; 2025 Yatrogenesis. Ectus-R API Documentation.</p>
        <p>For support, visit <a href="https://github.com/Yatrogenesis/Ectus-R">GitHub</a> or contact <a href="mailto:support@ectus.ai">support@ectus.ai</a></p>
    </footer>
</body>
</html>